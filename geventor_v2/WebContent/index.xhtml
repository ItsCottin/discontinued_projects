<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/WEB-INF/template/layoutV3.xhtml">
	<!-- propiedade templete define qual master page sera aplicada nessa pagina -->
	
	<!-- ui define, onde ficara todo conteudo Ã  ser adicionado na master page (dentro do body definido na master page) -->
	<ui:define name="contentV3">
	
		<div class="row col-md-12 col-xs-12 align-items-center mb-4">
	      	<div class="col-sm-2 col-xs-1 col-sm-2-no-100-width">
	      		<img src="https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg" />
	      	</div>
	      	<div class="col-sm-7 col-xs-6 col-sm-7-no-100-width">
	      		<h2 class="fw-bold">Geventor</h2>
	      	</div>
	    </div>
		
		<div class="col-md-8 col-lg-6">
			<ul class="nav nav-tab">
		        <li class="nav-tab-item active">
		            <a data-tab="tab-1" data-toggle="pill" class="nav-tab-link tab nav-link active" aria-current="page" href="#login">Login</a>
		         </li>
		         <li class="nav-tab-item">
		            <a data-tab="tab-2" data-toggle="pill" class="nav-tab-link tab nav-link" href="#cadastro">Cadastro</a>
		         </li>
	     	 </ul>
     	 </div>
		<div class="tab-content py-4">
     	 	<div id="login" class="tab-pane active">
      			<div class="col-md-8 col-lg-6 border-rcf bg-white shadow">
      				<div class="row ml-1 mt-3">
      					<div class="col form-group text-truncate">
	      					<h3>Realize seu Login</h3>
	      				</div>
	      			</div>
	      			<h:form id="login" style="margin-bottom: 2px!important">
      					<div class="row ml-1">
      						<div class="col-sm-3 col-md-3 col-lg-3 col-xl-2 col-small-3-rcf form-group text-truncate">
	      						<label for="Usuario" class="col-form-label">Login:</label>
	      					</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-9 col-small-9-rcf form-group">
								<h:inputText class="form-control form-control-lg" id="usuario" value="#{userContextMB.user}" label="Nome" required="true"/>
							</div>
						</div>
						<div class="row ml-1">
							<div class="col-sm-3 col-md-3 col-lg-3 col-xl-2 col-small-3-rcf form-group text-truncate">
								<label for="Senha" class="col-form-label">Senha:</label>
							</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-9 col-small-9-rcf form-group">
								<h:inputSecret class="form-control form-control-lg" id="senha" value="#{userContextMB.password}" label="Senha" required="true"/>
							</div>	
						</div>
						<div class="row ml-1">
							<div class="col form-group mt-3">
								<p:commandButton styleClass="btn btn-success ui-widget-button-success-rcf" icon="ui-icon-check" value="Entrar" 
									actionListener="#{userContextMB.doLogin}" update=":msgs">
									<p:ajaxStatus onstart="PF('status').show()" onsuccess="PF('status').hide()" />
								</p:commandButton>
							</div>
						</div>
					</h:form>
				</div>
			</div>
				<div id="cadastro" class="tab-pane">
      				<div class="col-sm-12 col-md-9 col-lg-8 col-xl-6 border-rcf  bg-white shadow">
      					<div class="row ml-1 mt-3">
      						<div class="col form-group text-truncate">
	      						<h3>Informe seus dados</h3>
	      					</div>
	      				</div>
	      				<h:form id="cadastroLogin" style="margin-bottom: 2px!important">
	      				<div class="row ml-1">
	      					<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-small-12-rcf form-group text-truncate">
	      						<label for="name" class="col-form-label">Nome Completo:</label>
	      					</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8 col-small-12-rcf form-group">	
								<h:inputText required="true" label="Nome" type="text" class="form-control form-control-lg" id="name" value="#{usuarioMB.editUsuario.nome}" />
							</div>
						</div>
						<div class="row ml-1">
							<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-small-12-rcf form-group text-truncate">
								<label for="email" class="col-form-label">E-mail:</label>
							</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8 col-small-12-rcf form-group">	
								<h:inputText required="true" label="E-mail" type="text" class="form-control form-control-lg" id="email" value="#{usuarioMB.editUsuario.email}">
									<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
								</h:inputText>
							</div>
						</div>
						<div class="row ml-1">
							<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-small-12-rcf form-group text-truncate">
								<label for="username" class="col-form-label">Login:</label>
							</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8 col-small-12-rcf form-group input-group">	
								<h:inputText required="true" label="Nome de Login" type="text" class="form-control form-control-lg" id="username" value="#{usuarioMB.editUsuario.login}">
									<p:ajax event="blur" listener="#{usuarioMB.verificaAlterLogin(usuarioMB.editUsuario.login)}" update="username, btnVerifica"/>
								</h:inputText>
								<div class="input-group-append">
	                            	<p:commandButton value="#{usuarioMB.editUsuario.loginVerificado eq 'false' ? 'Verificar' : 'Verificado'}" 
	                            		styleClass="btn btn-outline-secondary ui-widget-button-secundary-rcf text-truncate" 
	                            		actionListener="#{usuarioMB.verificaLoginExiste()}" disabled="#{usuarioMB.editUsuario.loginVerificado}" update="btnVerifica, username" 
	                            		id="btnVerifica">
	                            		<p:ajaxStatus onstart="PF('status').show()" onsuccess="PF('status').hide()" />
	                            	</p:commandButton>
                            	</div>
							</div>
						</div>
						<div class="row ml-1">
							<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-small-12-rcf form-group text-truncate">
								<label for="senha" class="col-form-label">Senha:</label>
							</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8 col-small-12-rcf form-group">	
								<h:inputSecret required="true" id="senha" class="form-control form-control-lg" value="#{usuarioMB.editUsuario.senha}" match="senha2" label="Digite uma senha"/>
							</div>
						</div>
						<div class="row ml-1">
							<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-small-12-rcf form-group text-truncate">
								<label for="senha2" class="col-form-label">Confirmar senha:</label>
							</div>
							<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8 col-small-12-rcf form-group">	
								<h:inputSecret required="true" id="senha2" class="form-control form-control-lg" value="#{usuarioMB.editUsuario.confirmSenha}" label="Confirmar senha" />
							</div>
						</div>
						<div class="row ml-1">
							<div class="col form-group mt-3">
								<p:commandButton styleClass="btn btn-success ui-widget-button-success-rcf" icon="ui-icon-check" value="Cadastrar" id="btnCadUsu"
									actionListener="#{usuarioMB.doSave()}" update=":msgs">
									<p:ajaxStatus onstart="PF('status').show()" onsuccess="PF('status').hide()" />
								</p:commandButton>
							</div>
						</div>
						</h:form>
					</div>
				</div>
			</div>
				<p:dialog widgetVar="status" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
    				<p:graphicImage name="ajaxloader.gif" library="images" />
				</p:dialog>
	</ui:define>
</ui:composition>